# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
app_name: "PingBack"
icon: "./assets/logo/v1_pingback-logo_deta@512.png"
micros:
  - name: docs
    src: ./docs
    path: docs
    public_routes:
      - "/*"
    engine: static #nodejs16
    serve: out
    #include:
    #  - out
    #- .next
    #- package.json
    #- package-lock.json
    #commands:
    #- npm init --yes
    #- npm i next
    #run: next start
    #- npm install --omit=dev
    #run: next start
  - name: frontend
    primary: true
    src: ./detaApp
    public_routes:
    - "/api/v*/events"
    include:
    - bundled
    #- node_modules
    - package.json
    #- package-lock.json
    engine: nodejs16
    #commands:
    #- export
    #- export NODE_OPTIONS=--max-old-space-size=4096
    #- export
    #- npm install
    #- DETA_PROJECT_KEY=a0 NODE_OPTIONS=--max-old-space-size=4096 npm run build
    #- npm run build
    run: node bundled #build